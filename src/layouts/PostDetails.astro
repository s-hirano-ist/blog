---
import Layout from "@layouts/Layout.astro";
import Header from "@components/Header.astro";
import Footer from "@components/Footer.astro";
import type { CollectionEntry } from "astro:content";
import PostSidebar from "./PostSidebar.astro";
import Main from "@layouts/Main.astro";

export interface Props {
  post: CollectionEntry<"blog">;
}

const { post } = Astro.props;

const { title, description } = post.data;

const { Content } = await post.render();

const ogUrl = new URL(`${title}.png`, Astro.url.origin).href;
---

<Layout title={title} description={description} ogImage={ogUrl}>
  <Header />
  <Main pageTitle={title}>
    <div class="side">
      <p>sidebar</p>
    </div>
    <article id="article" role="article" class="prose mx-auto mt-8 max-w-5xl">
      <PostSidebar post={post.body} />
      <Content />
    </article>
  </Main>
  <Footer />
</Layout>
